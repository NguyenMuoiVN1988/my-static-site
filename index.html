<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - Qu·∫£n l√Ω C√¢u h·ªèi To√°n</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
        <h1>Danh s√°ch H·ªçc sinh</h1>
        <ul id="user-list">
            <li class="loading">ƒêang t·∫£i d·ªØ li·ªáu...</li>
        </ul>
    </div>

     <script>
        async function loadUsers() {
            const ul = document.getElementById('user-list')
            
            try {
                console.log('ƒêang g·ªçi API...')
                const response = await fetch('/api/users')
                
                console.log('Response status:', response.status)
                console.log('Response headers:', response.headers)
                
                if (!response.ok) {
                    // Th·ª≠ ƒë·ªçc response text ƒë·ªÉ debug
                    const errorText = await response.text()
                    console.error('Error response:', errorText)
                    throw new Error(`L·ªói server: ${response.status} - ${errorText}`)
                }
                
                const data = await response.json()
                const result = await response.json()
                console.log('Data tr·∫£ v·ªÅ t·ª´ API:', result)

                const users = result.data // üëà data ph·∫£i l√† m·∫£ng

            if (Array.isArray(users)) {
                  users.forEach(user => {
        const li = document.createElement('li')
            li.innerHTML = `
      <strong>${user.name}</strong><br>
      Email: ${user.email}<br>
      M√£ h·ªçc sinh: ${user.student_id}<br>
      L·ªõp: ${user.class}
    `
    ul.appendChild(li)
          })
} else {
  console.error('Kh√¥ng c√≥ d·ªØ li·ªáu h·ªçc sinh trong result.data')
}
              
                
                
            } catch (err) {
                console.error('L·ªói khi g·ªçi API:', err)
                ul.innerHTML = `<li class="error">L·ªói: ${err.message}</li>`
            }
        }
        
        // G·ªçi h√†m khi trang ƒë√£ load
        document.addEventListener('DOMContentLoaded', loadUsers)
    </script>
</body>
</html> 
